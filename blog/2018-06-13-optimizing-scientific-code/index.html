<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.53" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Random thoughts on optimizing code for scientific computations &middot; Wu Sun, Ph.D.</title>

  
  <link type="text/css" rel="stylesheet" href="http://wusun.name/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://wusun.name/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://wusun.name/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://wusun.name/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Wu Sun, Ph.D." />

  

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
          delimiters: [
              {left: "$$", right: "$$", display: true},
              {left: "\\(", right: "\\)", display: false},
              {left: "$", right: "$", display: false},
              {left: "\\[", right: "\\]", display: true}
          ]
      });
  });
</script>

</head>

  <body class="theme-base-08 ">
  <link href="/css/academicons.min.css" rel="stylesheet">
<link href="/css/fontawesome.css" rel="stylesheet">
<link href="/css/brands.css" rel="stylesheet">
<link href="/css/solid.css" rel="stylesheet">

<aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://wusun.name/"><h1>Wu Sun, Ph.D.</h1></a>
      <p class="lead">
       carbon cycle, climate, photosynthesis, soils, and exotic trace gases 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        
        
        <li><a href="/about/"> About </a></li><li><a href="/cv/"> CV </a></li><li><a href="/publications/"> Publications </a></li><li><a href="/projects/"> Projects </a></li><li><a href="/teaching/"> Teaching </a></li><li><a href="/blog/"> Blog </a></li>
      </ul>
    </nav>

    <div class="sidebar-about">
      <font size="3">
      <p>
        
        <a href="https://github.com/wusunlab">
          <i class="fab fa-github" aria-hidden="true"></i>
          <span class="username">wusunlab</span>
        </a>
        
        <br>
        
        <a href="https://scholar.google.com/citations?user=YjkYTeoAAAAJ">
          <i class="ai ai-google-scholar-square" aria-hidden="true"></i>
          <span class="username">Google Scholar</span>
        </a>
        
        <br>
        
        <a href="https://orcid.org/0000-0002-2333-6282">
          <i class="ai ai-orcid-square" aria-hidden="true"></i>
          <span class="username">ORCID</span>
        </a>
        
        <br>
        
        <a class="u-email" href="mailto:wusun@protonmail.com">
          <i class="fas fa-envelope" aria-hidden="true"></i>
          <span class="username">wusun@protonmail.com</span>
        </a>
        
      </p>
      </font>
    </div>

    <p>Â© 2019 Wu Sun. All rights reserved.</p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>Random thoughts on optimizing code for scientific computations</h1>
  <time datetime=2018-06-13T19:25:00-0700 class="post-date">Wed, Jun 13, 2018</time>
  

<p>I have no time to write an essay, so here are some fragmentary thoughts.</p>

<ol>
<li><p>Scientists who deal with computationally demanding research subjects can be
obsessed with code performance, and sometimes rightly so. However, this
obsession, if not tamed by sound principles and pragmatic wisdom, may lead
us down the evil path of <a href="http://wiki.c2.com/?PrematureOptimization">Premature Optimization</a>.
We should always be reminded of its danger. The aphorism by Donald Knuth
may be recited three times a day:</p>

<blockquote>
<p><em>Premature optimization is the root of all evil.</em></p>
</blockquote></li>

<li><p>Make it work first, and then make it fast.</p></li>

<li><p>Follow the <a href="http://wiki.c2.com/?RulesOfOptimizationClub">Rules Of Optimization</a>.</p></li>

<li><p>Level of trust: profiler &gt; micro-benchmark tests &gt; design for performance.</p></li>

<li><p>Refactoring is a never-ending quest. You can make the work of the future
&ldquo;you&rdquo; easier by writing clean and maintainable code at this moment.</p></li>

<li><p>There is not a language that rules them all. Even in the small niche of
scientific computing. Never will. Learn multiple languages and pick the
best horse for the course.</p></li>

<li><p>Do not idolize Fortran (or C or C++). If you don&rsquo;t have tight inner loops
that consume 80% of your computation time, then you probably don&rsquo;t need to
use them (unless you enjoy so). Vita brevis; learn and use a high-level
language.</p></li>
</ol>

<p>Afterthought: I think some of the rules of optimization also apply to writing a
manuscript. For example, do not commit premature editing before having the
first draft.</p>

<h2 id="references">References</h2>

<ol>
<li>&ldquo;CategoryOptimization&rdquo;, <a href="http://wiki.c2.com/?CategoryOptimization">http://wiki.c2.com/?CategoryOptimization</a>. This
contains a bunch of insightful posts on how to deal with optimization.</li>
<li>Fowler, M. (2002). Yet Another Optimization Article. <em>IEEE Software</em>,
19(3), 20&ndash;21. doi:10.1109/MS.2002.1003448. Retrieved at
<a href="https://www.martinfowler.com/ieeeSoftware/yetOptimization.pdf">https://www.martinfowler.com/ieeeSoftware/yetOptimization.pdf</a> on
2018-06-13.</li>
</ol>

</div>


    </main>

    
  </body>
</html>
